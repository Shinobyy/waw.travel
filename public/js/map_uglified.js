window.initMap=async function(){try{const n=new google.maps.Map(document.getElementById("map"),{zoom:2,minZoom:2,center:{lat:51.5074,lng:.1278},mapId:"fa7b1aadc11c7224",mapTypeId:"satellite",mapTypeControl:!1,fullscreenControl:!1,linksControl:!1,panControl:!1,addressControl:!1,enableCloseButton:!1,scaleControl:!1,navigationControl:!1,streetViewControl:!1}),a=[];checkpoints.forEach(e=>{var[o,t]=e.split(",").map(Number);isNaN(o)||isNaN(t)?console.warn("Invalid checkpoint data:",e):(e={lat:o,lng:t},a.push(e),new google.maps.marker.AdvancedMarkerElement({map:n,position:e,title:"Checkpoint"}))}),1<a.length&&new google.maps.Polyline({path:a,geodesic:!1,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:1.5}).setMap(n)}catch(e){console.error("Error initializing the map:",e)}},document.addEventListener("turbo:load",function(){document.getElementById("map")&&initMap()});